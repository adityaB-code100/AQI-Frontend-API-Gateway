{% extends "base.html" %}
{% block title %}Forgot Password Â· AQI Project{% endblock %}

{% block content %}
<div class="flex items-center justify-center min-h-screen px-4">
  <div class="bg-white dark:bg-gray-900 rounded-2xl shadow-xl w-full max-w-md overflow-hidden transition duration-300">
    
    <!-- Header -->
    <div class="bg-gradient-to-r from-indigo-500 to-blue-500 text-white p-6">
      <h1 class="text-lg font-bold">Reset Password</h1>
    </div>

    <!-- Body -->
    <div class="p-6">
      <form action="{{ url_for('forgot_password') }}" method="post" class="space-y-5" onsubmit="return checkMatch()">
        
        <!-- Account Type -->
        <div>
          <label class="block text-sm font-semibold text-gray-600 dark:text-gray-300">Account Type</label>
          <select name="account_type" required
            class="w-full mt-2 px-4 py-3 border-2 rounded-xl focus:ring-2 focus:ring-blue-400 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-200">
            <option value="personal">Personal</option>
            <option value="institution">Institution</option>
          </select>
        </div>

        <!-- Email -->
        <div>
          <label class="block text-sm font-semibold text-gray-600 dark:text-gray-300">Email</label>
          <input type="email" name="email" required
            class="w-full mt-2 px-4 py-3 border-2 rounded-xl focus:ring-2 focus:ring-blue-400 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-200" />
        </div>

        <!-- New Password -->
        <div>
          <label class="block text-sm font-semibold text-gray-600 dark:text-gray-300">New Password</label>
          <input type="password" name="new_password" id="npw" required
            class="w-full mt-2 px-4 py-3 border-2 rounded-xl focus:ring-2 focus:ring-blue-400 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-200" />
        </div>

        <!-- Confirm Password -->
        <div>
          <label class="block text-sm font-semibold text-gray-600 dark:text-gray-300">Confirm Password</label>
          <input type="password" id="cpw" required
            class="w-full mt-2 px-4 py-3 border-2 rounded-xl focus:ring-2 focus:ring-blue-400 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-200" />
          <p id="mismatch" class="hidden text-sm text-red-600 mt-1">Passwords do not match</p>
        </div>

        <!-- Submit -->
        <button type="submit"
          class="w-full py-3 rounded-xl bg-gradient-to-r from-indigo-500 to-blue-500 text-white font-semibold hover:from-indigo-600 hover:to-blue-600 shadow-md transition">
          Update Password
        </button>
      </form>
    </div>
  </div>
</div>

<script>
function checkMatch() {
  const a = document.getElementById('npw').value;
  const b = document.getElementById('cpw').value;
  const msg = document.getElementById('mismatch');

  if (a !== b) {
    msg.classList.remove('hidden');
    return false;
  }
  msg.classList.add('hidden');
  return true;
}
</script>
{% endblock %}
